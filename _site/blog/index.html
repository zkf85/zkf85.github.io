<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog List &middot; Everest
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
<!-- 
  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  
</head>
 -->

  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">

  <br><br><br><br>

    <div class="sidebar-personal-info">
      
      <div class="sidebar-personal-info-section">
        <p>An <strong>iOS developer and designer</strong>. Blogging is good.</p>
      </div>

      
      
      
      <div class="sidebar-personal-info-section">
        <p> Follow me: 
        
        
        
        <a href="https://github.com/zkf85">
          <i class="fa fa-github" aria-hidden="true"></i>
        </a>
        
        
        
        </p>
      </div>
      
    </div>
  </div>

<br><br>

  <nav class="sidebar-nav">

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item active" href="/blog/">
          Blog
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/about/">
          About
        </a>

        
      </span>

    

    <!-- <span class="sidebar-nav-item">Currently v1.0.0</span> -->
  </nav>


  <div class="sidebar-item">
    <br><br>
    <p>
    &copy; 2016 Kefeng Zhu. <br>
    All Rights Reserved.
    <br><br>
    Powered by <a href="http://jekyllrb.com">jekyll</a>. 
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <!-- <a href="/" title="Home" title="Everest">
              <img class="masthead-logo" src=""/>
            </a> -->
            <a href="/" title="Home">Everest</a>
            <small>Kefeng's blog</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="page">
  <h1 class="page-title">Blog List</h1>
  <div class="posts">
  
  <div class="postlist">
    <h1 class="postlist-title">
      <ul>

        <a href="/ios/2016/11/29/notification/">
          <li>
          Notifications - Example
        <small class="post-date">29 Nov 2016</small>
        </li>
        </a>

      </ul>
    </h1>

    <!-- <span class="postlist-date">2016-11-29 12:30:00 +0800</span> -->
    <!--  | 
    
    <a href="/blog/tags/#ios" class="post-tag">ios</a>
    
    <a href="/blog/tags/#notification" class="post-tag">notification</a>
    
    <a href="/blog/tags/#objective-c" class="post-tag">objective-c</a>
    
     -->

    <!-- <article>
      <div class="message">
This is a simple example of how to post and listen to a notification radio.
<br />KF 11/29/2016
</div>

<h2 id="what-is-a-notification">What is a Notification?</h2>
<blockquote>
  <p>Reference: <a href="http://www.informit.com/articles/article.aspx?p=2091958">How Best to Use Delegates and Notifications in Objective-C</a></p>
</blockquote>

<p>Notifications provide a means of broadcasting a message from anywhere to anywhere. The <code class="highlighter-rouge">NSNotification</code> class provides this functionality in Objective-C. It is not strictly a part of the language, but rather the Foundation framework. Instances of NSNotification are broadcast through an <code class="highlighter-rouge">NSNotificationCenter</code>.</p>

<p>Notifications contain a name, an object and a dictionary of metadata. The object and metadata are optional, but the name is required. An object can register with the notification center to receive certain notifications, filtered by name, object or both name and object. Additionally, a selector is passed, which is called when a notification matching the filter is broadcast.
An example of a notification is as follows:</p>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">// Registering as observer from one object
</span><span class="p">[[</span><span class="n">NSNotificationCenter</span> <span class="nf">defaultCenter</span><span class="p">]</span> <span class="nf">addObserver</span><span class="p">:</span><span class="n">self</span>
                                         <span class="nf">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">thingHappened</span><span class="o">:</span><span class="p">)</span>
                                             <span class="n">name</span><span class="o">:</span><span class="n">MyThingHappened</span>
                                           <span class="n">object</span><span class="o">:</span><span class="n">_myObject</span><span class="p">];</span>

<span class="c1">// Posting notification from another object
</span><span class="p">[[</span><span class="n">NSNotificationCenter</span> <span class="nf">defaultCenter</span><span class="p">]</span> <span class="nf">postNotificationName</span><span class="p">:</span><span class="n">MyThingHappened</span>
                                                    <span class="nf">object</span><span class="p">:</span><span class="n">self</span>
                                                  <span class="n">userInfo</span><span class="o">:</span><span class="nb">nil</span><span class="p">];</span>
</code></pre>
</div>

<p>In this example one object is registering itself as an observer for the MyThingHappened notification, limiting it to when that notification occurs on the exact object, <code class="highlighter-rouge">_myObject</code>. Then, another object is posting that notification with itself as the object and nothing as the metadata dictionary, <code class="highlighter-rouge">userInfo</code>. So in this case, if the object that’s posting the notification is <code class="highlighter-rouge">_myObject</code> from the context of the registering object, then the notification will cause thingHappened: to be called.</p>

<h2 id="why-and-when-to-use-notification">Why and When to Use Notification?</h2>
<h3 id="coupling">Coupling</h3>
<p>Notifications result in loose coupling between objects. The coupling is <strong>loose</strong> because the object sending a notification doesn’t know what is listening to the notification. This loose coupling can be extremely powerful because multiple objects can all register to listen to the same notification, from different parts of an application. However, loose coupling can also make the use of notifications a nightmare to debug, since code can easily become entangled. Following the code paths produced when a notification is broadcast can become a daunting experience.</p>
<h3 id="multiple-listeners">Multiple Listeners</h3>
<p>By design, notifications offer multiple listeners. There can be zero, one or many listeners for any one notification. If you are certain that you’ll need multiple listeners, a notification is the correct route to go down. The instance above of login state handling is a perfect example of this. It’s likely that multiple objects are going to care about login state changing, so a notification makes sense.</p>
<h3 id="is-the-object-known">Is the Object Known?</h3>
<p>Sometimes you don’t actually know the precise object you want to communicate with. An example of such a scenario is the keyboard in iOS, which is a view which is handled entirely by iOS for you.</p>

<h2 id="example-in-my-project---timepocket">Example in my project - TimePocket</h2>
<p>In my project ‘TimePocket’, I use notification to pass <code class="highlighter-rouge">managedObjectContext</code> from <code class="highlighter-rouge">AppDelegate</code> to the <code class="highlighter-rouge">ViewController</code> at a proper time during the life cycle.</p>

<h3 id="create-a-header-file---preparing-for-the-notification">1. Create a Header File - Preparing for the Notification</h3>
<p>Create a header file called <code class="highlighter-rouge">EventDatabaseAvailability.h</code>
In the file add the following two constants:</p>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="cp">#define EventDatabaseAvailabilityNotification @"EventDatabaseAvailabilityNotification"
#define EventDatabaseAvailabilityContext @"Context"
</span></code></pre>
</div>
<h3 id="post-notification">2. Post Notification</h3>
<p>When the initialization of my database is completed, I post my notification there in order to pass the <code class="highlighter-rouge">managedObjectContext</code>.</p>

<p>Post notification code:</p>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">userInfo</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">eventDatabaseContext</span> <span class="p">?</span> <span class="p">@{</span> <span class="n">EventDatabaseAvailabilityContext</span> <span class="o">:</span> <span class="n">self</span><span class="p">.</span><span class="n">eventDatabaseContext</span> <span class="p">}</span> <span class="p">:</span> <span class="nb">nil</span><span class="p">;</span>
        <span class="p">[[</span><span class="n">NSNotificationCenter</span> <span class="nf">defaultCenter</span><span class="p">]</span> <span class="nf">postNotificationName</span><span class="p">:</span><span class="n">EventDatabaseAvailabilityNotification</span> <span class="nf">object</span><span class="p">:</span><span class="n">self</span> <span class="n">userInfo</span><span class="o">:</span><span class="n">userInfo</span><span class="p">];</span>
</code></pre>
</div>
<h3 id="listen-to-the-notification">3. Listen to the Notification</h3>
<p>In my <code class="highlighter-rouge">ViewController</code>, the notification observer should be added as early as possible in its life cycle. Therefore, it’s added in <code class="highlighter-rouge">awakeFromNib</code>, which is the earliest part in the controller’s life cycle.</p>

<p>Add the notification observer in <code class="highlighter-rouge">- (void)awakeFromNib</code> to listen to the notification.</p>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">awakeFromNib</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">super</span> <span class="nf">awakeFromNib</span><span class="p">];</span>
    <span class="c1">// KF 11/28/2016
</span>    <span class="c1">// Listen to the Notification from AppDelegate
</span>    <span class="p">[[</span><span class="n">NSNotificationCenter</span> <span class="nf">defaultCenter</span><span class="p">]</span>
     <span class="nf">addObserverForName</span><span class="p">:</span><span class="n">EventDatabaseAvailabilityNotification</span>
     <span class="nf">object</span><span class="p">:</span><span class="nb">nil</span>
     <span class="n">queue</span><span class="o">:</span><span class="nb">nil</span>
     <span class="n">usingBlock</span><span class="o">:^</span><span class="p">(</span><span class="n">NSNotification</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">note</span><span class="p">)</span> <span class="p">{</span>
         <span class="n">self</span><span class="p">.</span><span class="n">managedObjectContext</span> <span class="o">=</span> <span class="n">note</span><span class="p">.</span><span class="n">userInfo</span><span class="p">[</span><span class="nf">EventDatabaseAvailabilityContext</span><span class="p">];</span>
     <span class="p">}];</span>
<span class="p">}</span>
</code></pre>
</div>

<p><br /><br />
<strong><em>KF</em></strong></p>

    <article> -->
    <!-- <div class="post-more">
      
      <a href="/ios/2016/11/29/notification/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/ios/2016/11/29/notification/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div> -->
  </div>
  
  <div class="postlist">
    <h1 class="postlist-title">
      <ul>

        <a href="/ios/2016/11/28/collection-view-ii/">
          <li>
          Collection View II - Designing Your Data Source and Delegate
        <small class="post-date">28 Nov 2016</small>
        </li>
        </a>

      </ul>
    </h1>

    <!-- <span class="postlist-date">2016-11-28 14:00:00 +0800</span> -->
    <!--  | 
    
    <a href="/blog/tags/#ios" class="post-tag">ios</a>
    
    <a href="/blog/tags/#uicollectionview" class="post-tag">uicollectionview</a>
    
    <a href="/blog/tags/#objective-c" class="post-tag">objective-c</a>
    
     -->

    <!-- <article>
      <div class="message">
Continue - Collection View learning notes on reading Apple Guide Document " Collection View Programming Guide for iOS".
<br />KF 11/28/2016
</div>
<h1 id="iidesigning-your-data-source-and-delegate">II.Designing Your Data Source and Delegate</h1>
<p>The <strong>data source</strong> object is the content that your app displays. The only requirement of the data source is that it must be able to provide information that the collection view needs, such as</p>
<ul>
  <li>how many items there are and</li>
  <li>which views to use when displaying those items.</li>
</ul>

<p>The <strong>delegate object</strong> is an optional (but recommended) object that manages aspects related to the presentation of and interaction with your content.  Although the delegate’s main job is to manage cell highlighting and selection, it can be extended to provide additional information. For example, the flow layout extends the basic delegate behavior to customize layout metrics, such as the size of cells and the spacing between them.</p>

<h2 id="the-data-source-manages-your-content">The Data Source Manages Your Content</h2>
<p>The data source object is the object responsible for managing the content you are presenting using a collection view. The data source object must conform to the <code class="highlighter-rouge">UICollectionViewDataSource</code> protocol, which defines the basic behavior and methods that you must support. The job of the data source is to provide the collection view with answers to the following questions:</p>

<ul>
  <li>How many sections does the collection view contain?</li>
  <li>For a given section, how many items does a section contain?</li>
  <li>For a given section or item, what views should be used to display the corresponding content?</li>
</ul>

<p><strong>Sections</strong> and <strong>items</strong> are the fundamental organizing principle for collection view content.
A collection view typically has <strong>at least one section</strong> and may contain more. Each section, in turn, contains <strong>zero</strong> or more items. Items represent the main content you want to present, whereas sections organize those items into logical groups. For example, a photo app might use sections to represent a single album of photos or a set of photos taken on the same day.</p>

<p>The collection view refers to the data it contains using NSIndexPath objects. When trying to locate an item, the collection view uses the index path information provided to it by the layout object. For items, the index path contains a section number and an item number. For supplementary and decoration views, the index path contains whichever values were provided by the layout object.</p>

<blockquote>
  <p><strong>Note:</strong> Although standard index paths support multiple levels, the collection view’s cells only supports index paths that are 2-levels deep with “section” and “item” parameters, much like the index paths for the UITableView class.</p>
</blockquote>

<p>Different layout objects could present section and item data very differently, as shown in <strong>Figure 2-1</strong>.</p>

<h4 id="centerfigure-2-1-sections-arranged-according-to-the-arrangement-of-layout-objectscenter"><center>Figure 2-1. Sections arranged according to the arrangement of layout objects</center></h4>
<p><img src="/public/img/20161128-2-1.png" alt="figure-2-1" /></p>

<h3 id="designing-your-data-objects">Designing Your Data Objects</h3>
<p>Organizing your data into sections and items makes it much easier to implement your data source methods later. And because your data source methods are called frequently, you want to make sure that your implementations of those methods are able to retrieve data as quickly as possible.</p>

<p>One simple solution (but certainly not the only solution) is for your data source to use a set of nested arrays, as shown in <strong>Figure 2-2</strong>.</p>

<h4 id="centerfigure-2-2-arranging-data-objects-using-nested-arrayscenter"><center>Figure 2-2. Arranging data objects using nested arrays</center></h4>

<center><img src="/public/img/20161128-2-2.png" width="5000" /></center>

<blockquote>
  <p><strong>Note:</strong> In general, your data objects should never be a performance bottleneck. The collection view usually accesses your data source only to calculate how many objects there are in total and to obtain views for elements that are currently onscreen. If the layout object relies only on data from your data objects, performance could be severely impacted when the data source contains thousands of objects.</p>
</blockquote>

<h3 id="telling-the-collection-view-about-your-content">Telling the Collection View About Your Content</h3>
<p>Among the questions asked of your data source by the collection view are how many sections it contains and how many items each section contains. The collection view asks your data source to provide this information when any of the following actions occur:</p>

<ul>
  <li>The collection view is displayed for the first time.</li>
  <li>You assign a different data source object to the collection view.</li>
  <li>You explicitly call the collection view’s <code class="highlighter-rouge">reloadData</code> method.</li>
  <li>The collection view delegate executes a block using <code class="highlighter-rouge">performBatchUpdates:completion:</code> or any of the move, insert, or delete methods.</li>
</ul>

<p>You provide the number of sections using the <code class="highlighter-rouge">numberOfSectionsInCollectionView:</code> method, and the number of items in each section using the <code class="highlighter-rouge">collectionView:numberOfItemsInSection:</code> method. You must implement the <code class="highlighter-rouge">collectionView:numberOfItemsInSection:</code> method, but if your collection view has only one section, implementing the <code class="highlighter-rouge">numberOfSectionsInCollectionView:</code> method is optional. Both methods return integer values with the appropriate information.</p>

<p>If you implemented your data source as shown in Figure 2-2, the implementation of your data source methods could be as simple as those shown below:</p>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">numberOfSectionsInCollectionView</span><span class="p">:(</span><span class="n">UICollectionView</span><span class="o">*</span><span class="p">)</span><span class="nv">collectionView</span> <span class="p">{</span>
    <span class="c1">// _data is a class member variable that contains one array per section.
</span>    <span class="k">return</span> <span class="p">[</span><span class="n">_data</span> <span class="nf">count</span><span class="p">];</span>
<span class="p">}</span>
 
<span class="k">-</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">collectionView</span><span class="p">:(</span><span class="n">UICollectionView</span><span class="o">*</span><span class="p">)</span><span class="nv">collectionView</span> <span class="nf">numberOfItemsInSection</span><span class="p">:(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">section</span> <span class="p">{</span>
    <span class="n">NSArray</span><span class="o">*</span> <span class="n">sectionArray</span> <span class="o">=</span> <span class="p">[</span><span class="n">_data</span> <span class="nf">objectAtIndex</span><span class="p">:</span><span class="n">section</span><span class="p">];</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">sectionArray</span> <span class="nf">count</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>
</div>

<h2 id="configuring-cells-and-supplementary-views">Configuring Cells and Supplementary Views</h2>
<p>Another important task of your data source is to provide the views that the collection view uses to display your content. The collection view does not track your app’s content. It simply takes the views you give it and applies the current layout information to them. Therefore, everything that is displayed by the views is your responsibility.</p>

<p>After your data source reports how many sections and items it manages, the collection view asks the layout object to provide layout attributes for the collection view’s content. At some point, the collection view asks the layout object to provide the list of elements in a specific rectangle (often this is the visible rectangle). The collection view uses that list to ask your data source for the corresponding cells and supplementary views. To provide those cells and supplementary views, your code must do the following:</p>

<ol>
  <li>Embed your template cells and views in your storyboard file. (Alternatively, register a class or nib file for each type of supported cell or view.)</li>
  <li>In your data source, dequeue and configure the appropriate cell or view when asked.</li>
</ol>

<p><br /><br />
<strong><em>KF</em></strong></p>

    <article> -->
    <!-- <div class="post-more">
      
      <a href="/ios/2016/11/28/collection-view-ii/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/ios/2016/11/28/collection-view-ii/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div> -->
  </div>
  
  <div class="postlist">
    <h1 class="postlist-title">
      <ul>

        <a href="/ios/2016/11/24/collection-view-i/">
          <li>
          Collection View I - Intro & Basics
        <small class="post-date">24 Nov 2016</small>
        </li>
        </a>

      </ul>
    </h1>

    <!-- <span class="postlist-date">2016-11-24 16:00:00 +0800</span> -->
    <!--  | 
    
    <a href="/blog/tags/#ios" class="post-tag">ios</a>
    
    <a href="/blog/tags/#uicollectionview" class="post-tag">uicollectionview</a>
    
    <a href="/blog/tags/#objective-c" class="post-tag">objective-c</a>
    
     -->

    <!-- <article>
      <div class="message">
"Collection View is super powerful." This article includes notes on reading Apple Guide Document " Collection View Programming Guide for iOS".
<br />KF 11/24/2016
</div>

<h1 id="about-ios-collection-views">About iOS Collection Views</h1>
<ul>
  <li>
    <p>A collection view is a way to present an ordered set of data items using a flexible and changeable layout.</p>
  </li>
  <li>
    <p>Collection views keep a strict separation between the data being presented and the visual elements used to present that data.</p>
  </li>
  <li>
    <p>In most cases, your app is solely responsible for managing the data. Your app also provides the view objects used to present that data.</p>
  </li>
  <li>
    <p>The collection view is all about the presentation and arrangement of your views and not about their content.</p>
  </li>
  <li>
    <p>The <strong>Flow Layout</strong> Supports Grids and Other Line-Oriented Presentations</p>
  </li>
</ul>

<h1 id="collection-view-basics">Collection View Basics</h1>
<ul>
  <li>your app must provide a data source object that tells the collection view how many items there are to display.</li>
</ul>

<h2 id="the-classes-and-protocols-for-implementing-collection-views">The Classes and Protocols for Implementing Collection Views</h2>

<p><strong>Table 1-1</strong> The classes and protocols for implementing collection views</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Purpose</th>
      <th style="text-align: left">Classes/Protocols</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Top-level containment <br />and management</td>
      <td style="text-align: left"><code class="highlighter-rouge">UICollectionView</code><br /><code class="highlighter-rouge">UICollectionViewController</code></td>
    </tr>
    <tr>
      <td style="text-align: left">Content <br />management</td>
      <td style="text-align: left"><code class="highlighter-rouge">UICollectionViewDataSource</code> protocol<br /><code class="highlighter-rouge">UICollectionViewDelegate</code> protocol</td>
    </tr>
    <tr>
      <td style="text-align: left">Presentation</td>
      <td style="text-align: left"><code class="highlighter-rouge">UICollectionReusableView</code><br /><code class="highlighter-rouge">UICollectionViewCell</code></td>
    </tr>
    <tr>
      <td style="text-align: left">Layout</td>
      <td style="text-align: left"><code class="highlighter-rouge">UICollectionViewLayout</code><br /><code class="highlighter-rouge">UICollectionViewLayoutAttributes</code><br /> <code class="highlighter-rouge">UICollectionViewUpdateItem</code></td>
    </tr>
    <tr>
      <td style="text-align: left">Flow Layout</td>
      <td style="text-align: left"><code class="highlighter-rouge">UICollectionViewFlowLayout</code><br /><code class="highlighter-rouge">UICollectionViewDelegateFlowLayout</code></td>
    </tr>
  </tbody>
</table>

<h3 id="uicollectionview"><code class="highlighter-rouge">UICollectionView</code></h3>
<blockquote>
  <p>A <code class="highlighter-rouge">UICollectionView</code> object defines the visible area for your collection view’s content. This class also facilitates the presentation of your data based on the layout information it receives from its layout object.</p>
</blockquote>

<h3 id="uicollectionviewcontroller"><code class="highlighter-rouge">UICollectionViewController</code></h3>
<blockquote>
  <p>A <code class="highlighter-rouge">UICollectionViewController</code> object provides view controller–level management support for a collection view. Its use is optional.</p>
</blockquote>

<h3 id="uicollectionviewdatasource-protocol"><code class="highlighter-rouge">UICollectionViewDataSource</code> protocol</h3>
<blockquote>
  <p>The data source object is the most important object associated with the collection view and is one that you must provide. The data source manages the content of the collection view and creates the views needed to present that content. To implement a data source object, you must create an object that conforms to the <code class="highlighter-rouge">UICollectionViewDataSource</code> protocol.</p>
</blockquote>

<h3 id="uicollectionviewdelegate-protocol"><code class="highlighter-rouge">UICollectionViewDelegate</code> protocol</h3>
<blockquote>
  <p>The collection view delegate object lets you intercept interesting messages from the collection view and customize the view’s behavior. For example, you use a delegate object to track the selection and highlighting of items in the collection view. Unlike the data source object, the delegate object is optional.</p>
</blockquote>

<h3 id="uicollectionreusableview--uicollectionviewcell"><code class="highlighter-rouge">UICollectionReusableView</code> &amp; <code class="highlighter-rouge">UICollectionViewCell</code></h3>
<blockquote>
  <p>All views displayed in a collection view must be instances of the <code class="highlighter-rouge">UICollectionReusableView</code> class. This class supports a recycling mechanism in use by collection views. Recycling views (instead of creating new ones) improves performance in general and especially improves it during scrolling.</p>
</blockquote>

<blockquote>
  <p>A <code class="highlighter-rouge">UICollectionViewCell</code> object is a specific type of reusable view that you use for your main data items.</p>
</blockquote>

<h3 id="uicollectionviewlayout-uicollectionviewlayoutattributes-uicollectionviewupdateitem"><code class="highlighter-rouge">UICollectionViewLayout</code>, <code class="highlighter-rouge">UICollectionViewLayoutAttributes</code>, <code class="highlighter-rouge">UICollectionViewUpdateItem</code></h3>
<blockquote>
  <p>Subclasses of <code class="highlighter-rouge">UICollectionViewLayout</code> are referred to as layout objects and are responsible for defining the location, size, and visual attributes of the cells and reusable views inside a collection view.</p>
</blockquote>

<blockquote>
  <p>During the layout process, a layout object creates layout attribute objects (instances of the <code class="highlighter-rouge">UICollectionViewLayoutAttributes</code> class) that tell the collection view where and how to display cells and reusable views.</p>
</blockquote>

<blockquote>
  <p>The layout object receives instances of the <code class="highlighter-rouge">UICollectionViewUpdateItem</code> class whenever data items are inserted, deleted, or moved within the collection view. You never need to create instances of this class yourself.</p>
</blockquote>

<h3 id="uicollectionviewflowlayout--uicollectionviewdelegateflowlayout-protocol"><code class="highlighter-rouge">UICollectionViewFlowLayout</code> &amp; <code class="highlighter-rouge">UICollectionViewDelegateFlowLayout</code> protocol</h3>
<blockquote>
  <p>The <code class="highlighter-rouge">UICollectionViewFlowLayout</code> class is a concrete layout object that you use to implement grids or other line-based layouts. You can use the class as-is or in conjunction with the flow delegate object, which allows you to customize the layout information dynamically.</p>
</blockquote>

<p><strong>Figure 1-1</strong> shows the relationship between the core objects associated with a collection view. The collection view gets information about the cells to display from its data source. The data source and delegate objects are custom objects provided by your app and used to manage the content, including the selection and highlighting of cells. The layout object is responsible for deciding where those cells belong and for sending that information to the collection view in the form of one or more layout attribute objects. The collection view then merges the layout information with the actual cells (and other views) to create the final visual presentation.</p>

<h4 id="center-figure-1-1-merging-content-and-layout-to-create-the-final-presentation-center"><center> Figure 1-1. Merging content and layout to create the final presentation </center></h4>
<p><img src="/public/img/20161124-1-1.png" alt="figure-1-1" /></p>

<p>When creating a collection view interface, you first add a UICollectionView object to your storyboard or nib file. Think of the collection view as the central hub, from which all other objects emanate. After adding that object, you can begin to configure any related objects, such as the data source or delegate. All configurations are centered around the collection view itself. For example, you never create a layout object without also creating a collection view object.</p>

<h2 id="reusable-views-improve-performance">Reusable Views Improve Performance</h2>
<p>Collection views employ a view recycling program to improve efficiency. As views move offscreen, they are removed from view and placed in a <strong>reuse queue</strong> instead of being deleted. As new content is scrolled onscreen, views are removed from the queue and repurposed with new content. To facilitate this recycling and reuse, all views displayed by the collection view must descend from the <code class="highlighter-rouge">UICollectionReusableView</code> class.</p>

<p>Collection views support three distinct types of reusable views, each of which has a specific intended usage:</p>

<ul>
  <li><em>Cells</em> present the main content of your collection view. The job of a cell is to present the content for a single item from your data source object. Each cell must be an instance of the <code class="highlighter-rouge">UICollectionViewCell</code> class, which you may subclass as needed to present your content. Cell objects provide inherent support for managing their own selection and highlight state. To actually apply a highlight to a cell, you must write some custom code. For information on implementing cell highlighting/selecting, see Managing the Visual State for Selections and Highlights.</li>
  <li><em>Supplementary</em> views display information about a section. Like cells, supplementary views are data driven. Unlike cells, supplementary views are not mandatory, and their usage and placement is controlled by the layout object being used. For example, the flow layout supports <strong>headers</strong> and <strong>footers</strong> as optional supplementary views.</li>
  <li><em>Decoration</em> views are visual adornments that are wholly owned by the layout object and are not tied to any data in your data source object. For example, a layout object might use decoration views to implement a custom background appearance.</li>
</ul>

<p>Unlike table views, collection views impose no specific style on the cells and supplementary views provided by your data source. Instead, the basic reusable view classes are blank canvases for you to modify.</p>

<h2 id="the-layout-object-controls-the-visual-presentation">The Layout Object Controls the Visual Presentation</h2>
<p>The layout object is solely responsible for determining the placement and visual styling of items within the collection view. Although your data source object provides the views and the actual content, the layout object determines the size, location, and other appearance-related attributes of those views. This separation of responsibilities makes it possible to change layouts dynamically without changing any of the data objects managed by your app.</p>

<p>The layout process used by collection views is related to, but distinct from, the layout process used by the rest of your app’s views. A layout object never touches the views it manages directly because it does not actually own any of those views. Instead, it generates attributes that describe the location, size, and visual appearance of the cells, supplementary views, and decoration views in the collection view. It is then the job of the collection view to apply those attributes to the actual view objects.</p>

<p><strong>Figure 1-2</strong> shows how a vertically scrolling flow layout arranges its cells and supplementary views. In a vertically scrolling flow layout, the width of the content area remains fixed and the height grows to accommodate the content. To compute the area, the layout object places views and cells one at a time, choosing the most appropriate location for each. In the case of the flow layout, the size of the cells and supplementary views are specified as properties, either on the layout object or by using a delegate. Computing the layout is just a matter of using those properties to place each view.</p>

<h4 id="centerfigure-1-2--the-layout-object-provides-layout-metricscenter"><center>Figure 1-2  The layout object provides layout metrics</center></h4>
<p><img src="/public/img/20161128-1-1.png" alt="figure-1-2" /></p>

<p>Layout objects control more than just the size and position of their views. The layout object can specify other view-related attributes, such as its <strong>transparency</strong>, its <strong>transform in 3D space</strong>, and its <strong>visibility</strong> (if any) above or below other views. These attributes let you create more interesting layouts. For example, you might create stacks of cells by placing the views on top of one another and changing their z-ordering, or you might use a transform to rotate them on any axis.</p>

<p><br /><br />
<strong><em>KF</em></strong></p>

    <article> -->
    <!-- <div class="post-more">
      
      <a href="/ios/2016/11/24/collection-view-i/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/ios/2016/11/24/collection-view-i/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div> -->
  </div>
  
  <div class="postlist">
    <h1 class="postlist-title">
      <ul>

        <a href="/ios/2016/11/20/core-data/">
          <li>
          Core Data
        <small class="post-date">20 Nov 2016</small>
        </li>
        </a>

      </ul>
    </h1>

    <!-- <span class="postlist-date">2016-11-20 00:00:00 +0800</span> -->
    <!--  | 
    
    <a href="/blog/tags/#ios" class="post-tag">ios</a>
    
    <a href="/blog/tags/#core-data" class="post-tag">core data</a>
    
    <a href="/blog/tags/#icloud" class="post-tag">icloud</a>
    
    <a href="/blog/tags/#uimanageddocument" class="post-tag">uimanageddocument</a>
    
     -->

    <!-- <article>
      <div class="message">
"It's all about how core data works."
<br />KF 11/20/2016
</div>

<h2 id="database">Database</h2>
<p>Some times you need to store large amount of data or query it in a sophisticated manner. And we want it to be object-oriented.</p>

<p>Core data framework is very powerful.</p>

<h2 id="how-does-it-work">How does it work?</h2>
<ul>
  <li>Create a visual mapping between database and objects;</li>
  <li>Create and query for objects using object-oriented API;</li>
  <li>Access the “columns in the database table” using <strong>@property</strong>s on those objects.</li>
  <li>Create a core data model, the visual map in xcode.</li>
</ul>

<h2 id="an-object-context">An Object Context</h2>
<p>You need an <code class="highlighter-rouge">NSManagedObjectContext</code>.</p>

<p>It is the hub around which all Core Data activity turns.</p>

<h3 id="how-do-i-get-one">How do I get one?</h3>
<p>There are two ways:</p>

<ol>
  <li>
    <p>Create a <code class="highlighter-rouge">UIMangedDocument</code> and ask for its <code class="highlighter-rouge">managedObjectContext</code> (a <code class="highlighter-rouge"><span class="k">@property</span></code>).</p>
  </li>
  <li>
    <p>Click the “Use Core Data” button when you create a project (only works with certain templates, then you AppDelegate will have a managedObjectContext @property).</p>

    <p>There will be an <code class="highlighter-rouge"><span class="k">@property</span></code> and a method <code class="highlighter-rouge">saveContext</code> generated for managing the core data.</p>
  </li>
</ol>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="k">@property</span> <span class="p">(</span><span class="n">readonly</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">NSPersistentContainer</span> <span class="o">*</span><span class="n">persistentContainer</span><span class="p">;</span>
<span class="c1">// The persistent container for the application. This implementation creates and returns a container, having loaded the store for the application to it.
</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">saveContext</span><span class="p">;</span>
</code></pre>
</div>
<p>We’re going to focus on doing the first one <code class="highlighter-rouge">UIManagedDocument</code>.</p>

<h2 id="uimanageddocument">UIManagedDocument</h2>
<p><code class="highlighter-rouge">UIManagedDocument</code> inherits from UIDocument which provides a lot of mechanism for the management of storage. It also good for iCloud support. Think of a <code class="highlighter-rouge">UIManagedDocument</code> as simply a container for your Core Data database.</p>

<h3 id="create-a-uimanageddocument">1. Create a UIManagedDocument</h3>
<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">NSFileManager</span> <span class="o">*</span><span class="n">fileManager</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSFileManager</span> <span class="nf">defaultManager</span><span class="p">];</span>
<span class="n">NSURL</span> <span class="o">*</span><span class="n">documentsDirectory</span> <span class="o">=</span> <span class="p">[[</span><span class="n">fileManager</span> <span class="nf">URLsForDirectory</span><span class="p">:</span><span class="n">NSDocumentDirectory</span> <span class="nf">inDomains</span><span class="p">:</span><span class="nf">NSUserDomainMask</span><span class="p">]</span> <span class="n">firstObject</span><span class="p">];</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">documentName</span> <span class="o">=</span> <span class="s">@"MyDocument"</span><span class="p">;</span> 
<span class="n">NSURL</span> <span class="o">*</span><span class="n">url</span> <span class="o">=</span> <span class="p">[</span><span class="n">documentsDirectory</span> <span class="nf">URLByAppendingPathComponent</span><span class="p">:</span><span class="n">documentName</span><span class="p">];</span>
<span class="n">UIManagedDocument</span> <span class="o">*</span><span class="n">document</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIManagedDocument</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFileURL</span><span class="p">:</span><span class="n">url</span><span class="p">];</span>
</code></pre>
</div>
<p>This creates the UIManagedDocument instance, but does not open nor create the underlying file.</p>

<h3 id="open-or-create-a-uimanageddocument">2. Open or Create a UIManagedDocument</h3>
<p>Check if the <code class="highlighter-rouge">UIManagedDocument</code>’s underlying file exists on disk:</p>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">BOOL</span> <span class="n">fileExists</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSFileManager</span> <span class="nf">defaultManager</span><span class="p">]</span> <span class="nf">fileExistsAtPath</span><span class="p">:[</span><span class="n">url</span> <span class="nf">path</span><span class="p">]];</span> 
</code></pre>
</div>
<p>Here is an example:</p>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="n">self</span><span class="p">.</span><span class="n">document</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIManagedDocument</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFileURL</span><span class="p">:(</span><span class="n">URL</span> <span class="o">*</span><span class="p">)</span><span class="n">url</span><span class="p">];</span>
<span class="k">if</span> <span class="p">([[</span><span class="n">NSFileManager</span> <span class="nf">defaultManager</span><span class="p">]</span> <span class="nf">fileExistsAtPath</span><span class="p">:[</span><span class="n">url</span> <span class="nf">path</span><span class="p">]])</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">document</span> <span class="nf">openWithCompletionHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">BOOL</span> <span class="n">success</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">success</span><span class="p">)</span> <span class="p">[</span><span class="n">self</span> <span class="nf">documentIsReady</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span> <span class="n">NSLog</span><span class="p">(</span><span class="s">@"couldn’t open document at %@"</span><span class="p">,</span> <span class="n">url</span><span class="p">);</span>
    <span class="p">}];</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">document</span> <span class="nf">saveToURL</span><span class="p">:</span><span class="n">url</span> <span class="nf">forSaveOperation</span><span class="p">:</span><span class="n">UIDocumentSaveForCreating</span>
      <span class="n">completionHandler</span><span class="o">:^</span><span class="p">(</span><span class="n">BOOL</span> <span class="n">success</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="n">success</span><span class="p">)</span> <span class="p">[</span><span class="n">self</span> <span class="nf">documentIsReady</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span> <span class="n">NSLog</span><span class="p">(</span><span class="s">@"couldn't create document at %@"</span><span class="p">,</span> <span class="n">url</span><span class="p">);</span>
      <span class="p">}];</span>
<span class="p">}</span>

<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">documentIsReady</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">document</span><span class="p">.</span><span class="n">documentState</span> <span class="o">==</span> <span class="n">UIDocumentStateNormal</span><span class="p">)</span> <span class="p">{</span> 
	<span class="c1">// start using document
</span>	<span class="n">NSManagedObjectContext</span> <span class="o">*</span><span class="n">context</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">document</span><span class="p">.</span><span class="n">managedObjectContext</span><span class="p">;</span>
   <span class="p">}</span> 
<span class="p">}</span>
</code></pre>
</div>

<h3 id="saving--closing">3. Saving &amp; Closing</h3>
<ul>
  <li>Notice that <code class="highlighter-rouge">UIManagedDocument</code>s AUTOSAVE themselves!</li>
  <li>Will automatically close if there are no strong pointers left to it.</li>
</ul>

<h2 id="nsnotification">NSNotification</h2>

<h3 id="how-would-you-watch-a-documents-managedobjectcontext">How would you watch a document’s managedObjectContext?</h3>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidAppear</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">animated</span>
 <span class="p">{</span>
     <span class="p">[</span><span class="n">super</span> <span class="nf">viewDidAppear</span><span class="p">:</span><span class="n">animated</span><span class="p">];</span>
     <span class="p">[</span><span class="n">center</span> <span class="nf">addObserver</span><span class="p">:</span><span class="n">self</span>
                <span class="nf">selector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">contextChanged</span><span class="o">:</span><span class="p">)</span>
                    <span class="nl">name:</span><span class="n">NSManagedObjectContextDidSaveNotification</span>
                  <span class="nl">object:</span><span class="n">document</span><span class="p">.</span><span class="n">managedObjectContext</span><span class="p">];</span> <span class="c1">//don’t pass nil here!
</span> <span class="p">}</span>
 <span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewWillDisappear</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">animated</span>
 <span class="p">{</span>
     <span class="p">[</span><span class="n">center</span> <span class="nf">removeObserver</span><span class="p">:</span><span class="n">self</span>
                       <span class="nf">name</span><span class="p">:</span><span class="n">NSManagedObjectContextDidSaveNotification</span>
                     <span class="nl">object:</span><span class="n">document</span><span class="p">.</span><span class="n">managedObjectContext</span><span class="p">];</span>
     <span class="p">[</span><span class="n">super</span> <span class="nf">viewWillDisappear</span><span class="p">:</span><span class="n">animated</span><span class="p">];</span>
 <span class="p">}</span>
</code></pre>
</div>

<h2 id="core-data">Core Data</h2>
<p>Now we use the <code class="highlighter-rouge">UIManagedDocument</code>’s <code class="highlighter-rouge">managedObjectContext</code> <code class="highlighter-rouge"><span class="k">@property</span></code> to insert/delete objects in the database and query for objects in the database.</p>

<h2 id="query">Query</h2>
<p>We can do this by executing an <code class="highlighter-rouge">NSFetchRequest</code> in our <code class="highlighter-rouge">NSManagedObjectContext</code>.</p>

<h3 id="four-important-things-involved-in-creating-an-nsfetchrequest">Four important things involved in creating an <code class="highlighter-rouge">NSFetchRequest</code></h3>
<ol>
  <li><code class="highlighter-rouge">Entity</code> to fetch (required);</li>
  <li>How many objects to fetch at a time and/or maximum to fetch (optional, default: all);</li>
  <li><code class="highlighter-rouge">NSSortDescriptor</code> to specify the order in which the array of fetched objects are returned;</li>
  <li><code class="highlighter-rouge">NSPredicate</code>* specifying which of those Entities of those Entities to fetch (optional, default is all of them).</li>
</ol>

<h2 id="dependency-injection">Dependency Injection</h2>

<h3 id="q-how-to-get-managedobjectcontext-for-viewcontroller-other-than-getting-it-from-appdelegate">Q: How to get managedObjectContext for viewController other than getting it from appDelegate?</h3>

<h3 id="a-use-dependency-injection">A: Use Dependency Injection</h3>
<p><a href="http://stackoverflow.com/questions/21050408/how-to-get-managedobjectcontext-for-viewcontroller-other-than-getting-it-from-ap">answer on stackoverflow</a></p>

<p>Basically the caller/constructor should be setting the NSManagedObjectContext onto the called/constructed.</p>

<p>In your <code class="highlighter-rouge">AppDelegat</code>e you should set the <code class="highlighter-rouge">NSManagedObjectContext</code> into the <code class="highlighter-rouge">rootViewController</code> that is associated with the <code class="highlighter-rouge">UIWindow</code>.</p>

<p>Your <code class="highlighter-rouge">rootViewController</code> should then set the <code class="highlighter-rouge">NSManagedObjectContext</code> into the next view controller and so on.</p>

<p>How? It is just a simple proper on the view controller class and the caller uses:</p>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="n">nextViewController</span> <span class="nf">setManagedObjectContext</span><span class="p">:[</span><span class="n">self</span> <span class="nf">managedObjectContext</span><span class="p">]];</span>
</code></pre>
</div>

<p>Some others may recommend a singleton but that is another deep dark pit that is best avoided.</p>

<p><br /><br />
<strong><em>KF</em></strong></p>

    <article> -->
    <!-- <div class="post-more">
      
      <a href="/ios/2016/11/20/core-data/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/ios/2016/11/20/core-data/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div> -->
  </div>
  
  <div class="postlist">
    <h1 class="postlist-title">
      <ul>

        <a href="/thoughts/2016/11/10/rural-resentment/">
          <li>
          The Role of 'Rural Resentment' in the Election 2016
        <small class="post-date">10 Nov 2016</small>
        </li>
        </a>

      </ul>
    </h1>

    <!-- <span class="postlist-date">2016-11-10 00:00:00 +0800</span> -->
    <!--  | 
    
    <a href="/blog/tags/#politics" class="post-tag">politics</a>
    
     -->

    <!-- <article>
      <div class="message">There is an obvious phenomenon when I was watching the results popping out with the votes' distribution geographically: most people in urban area supported Hillary while there was a landslide winning in favor of Trump in rural area all over the country. An article stressed this topic and I take a summary here.</div>

<p><img src="/public/img/20161110-election-map.jpg" alt="Trump has better coverage than Verizon" /></p>

<blockquote>
  <p>The original <a href="http://www.npr.org/2016/08/18/490240652/is-rural-resentment-driving-voters-to-donald-trump">article on NPR.com is here</a>. This article was published months before the general election.</p>
</blockquote>

<h1 id="is-rural-resentment-driving-voters-to-donald-trump">Is ‘Rural Resentment’ Driving Voters To Donald Trump?</h1>

<p>The rural-urban divide persists nationwide. Hillary Clinton led Trump by 26 points in urban areas in a recent poll, also from the Washington Post. But in rural areas, Trump led Clinton by 20 points.</p>

<p>Four years ago, Obama won urban areas by 26 points, according to exit polls, while Romney won rural areas by 20 points.</p>

<h2 id="why">Why?</h2>

<p>Rural voters heavily lean toward supporting Trump, so it’s no surprise that the stats that describe America’s rural areas also happen to describe Trump supporters quite well. Trump does particularly well among older, white and non-college-educated Americans.</p>

<p>And as it happens, <strong>rural areas are older than the rest of the nation</strong> — the median age in rural areas is around 40, compared to 37 for the rest of the country, according to a report from the Housing Assistance Council, a group that promotes affordable housing in rural areas.</p>

<p><strong>Likewise, rural areas tend to be less educated than urban areas.</strong></p>

<p><img src="/public/img/20161110-npr-rural-diversity.png" alt="rural less diverse" /></p>

<p>Rural areas are whiter, as well. Nearly 80 percent of people in rural areas are white non-Hispanics, compared to around 64 percent among the U.S. as a whol</p>

<h2 id="does-rural-ness-drive-peoples-votes">Does Rural-Ness Drive People’s Votes?</h2>

<p>All these stats might make it seem that it’s demographics that cause rural voters to choose Trump, or other Republican candidates: that there’s something about being white or about being older or not having a college diploma that makes a person vote for him, and that those people also just happen to live in rural areas.</p>

<p>Or, perhaps, that there’s something about being conservative that makes a person choose a rural area.</p>

<p>There’s this sense that people in those communities are not getting their fair share compared to people in the cities,” said Katherine Cramer, a political science professor at the University of Wisconsin.</p>

<p>“They feel like their communities are dying, and they perceive that all that stuff — the young people, the money, the livelihood — is going somewhere, and it’s going to the cities,” she said.</p>

<p>“Many voters have racial and economic resentments, but the thing that surprised me in my research was how common it was for people in small towns to talk about these resentments with reference to their towns,” she said.</p>

<h2 id="trumps-favorable">Trump’s Favorable</h2>

<p>Trump’s rhetoric may similarly appeal to America’s rural populations.</p>

<p>“The resources, the people, the respect seem to be going somewhere else, or to other types of people, and here comes someone who says ‘You’re right, you’re not getting your fair share. It’s going to people who aren’t deserving, and you vote me in and we’re going to make America great again,” she said.</p>

<p><br />
<strong><em>KF</em></strong></p>

    <article> -->
    <!-- <div class="post-more">
      
      <a href="/thoughts/2016/11/10/rural-resentment/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/thoughts/2016/11/10/rural-resentment/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div> -->
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>


</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
  </body>
  
  <script id="dsq-count-scr" src="//zkf85githubio.disqus.com/count.js" async></script>
  
</html>
